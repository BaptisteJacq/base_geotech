/*
TA_GEOTECH_RELATION_LIBELLE_LONG_COURT : Création de la table TA_GEOTECH_RELATION_LIBELLE_LONG_COURT contenant les identifiant des tables TA_GEOTECH_RELATION_LIBELLE_LONG_COURT et TA_GEOTECH_FAMILLE, permettant de joindre chaque libellé long à sa famille de libellés.
*/

-- 1. La table
CREATE TABLE G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT (
	"FID_LIBELLE_LONG" NUMBER(38,0) GENERATED BY DEFAULT AS IDENTITY NOT NULL,
	"FID_LIBELLE_COURT" NUMBER(38,0)
 );

-- 2. Les commentaires
COMMENT ON TABLE G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT IS 'Table pivot permettant d''associer un ou plusieurs libellés longs à un ou plusieurs libellés courts.';
COMMENT ON COLUMN G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT.FID_LIBELLE_LONG IS 'Clé primaire composée et clé étrangère vers la table TA_GEOTECH_LIBELLE_LONG permettant d''associer un libellé long à un ou plusieurs libellés courts.';
COMMENT ON COLUMN G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT.FID_LIBELLE_COURT IS 'Clé primaire composée et clé étrangère vers la table TA_GEOTECH_LIBELLE_COURT permettant d''associer un libellé court à un ou plusieurs libellés longs.';

-- 3. Les contraintes
-- Contrainte de clé primaire
ALTER TABLE G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT
ADD CONSTRAINT TA_GEOTECH_RELATION_LIBELLE_LONG_COURT_PK
PRIMARY KEY("FID_LIBELLE_COURT", "FID_LIBELLE_COURT")
USING INDEX TABLESPACE G_ADT_INDX;

-- Contraintes de clés étrangères
ALTER TABLE G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT
ADD CONSTRAINT TA_GEOTECH_RELATION_LIBELLE_LONG_COURT_FID_LIBELLE_COURT_FK
FOREIGN KEY("FID_LIBELLE_COURT")
REFERENCES G_GEO.TA_GEOTECH_LIBELLE_COURT("OBJECTID");

ALTER TABLE G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT
ADD CONSTRAINT TA_GEOTECH_RELATION_LIBELLE_LONG_COURT_FID_LIBELLE_LONG_FK
FOREIGN KEY("FID_LIBELLE_LONG")
REFERENCES G_GEO.TA_GEOTECH_LIBELLE_LONG("OBJECTID");

-- 4. Les index
CREATE INDEX TA_GEOTECH_RELATION_LIBELLE_LONG_COURT_FID_LIBELLE_COURT_IDX ON G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT("FID_LIBELLE_COURT")
    TABLESPACE G_ADT_INDX;

CREATE INDEX TA_GEOTECH_RELATION_LIBELLE_LONG_COURT_FID_LIBELLE_LONG_IDX ON G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT("FID_LIBELLE_LONG")
    TABLESPACE G_ADT_INDX;

-- 5. Les droits de lecture, écriture, suppression
GRANT SELECT ON G_GEO.TA_GEOTECH_RELATION_LIBELLE_LONG_COURT TO G_ADMIN_SIG;

/

